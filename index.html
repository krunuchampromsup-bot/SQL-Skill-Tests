<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL VIEW Master Class - T.Nuch Smart Com</title>
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #0f172a;
            --card: #1e293b;
            --text: #f8fafc;
            --accent: #34d399;
            --gold: #f59e0b;
        }
        body { font-family: 'Prompt', sans-serif; background-color: var(--bg); color: var(--text); margin: 0; }
        .container { max-width: 1000px; margin: auto; padding: 20px; }
        
        /* Header & Leaderboard Theme */
        .hero-section { text-align: center; padding: 40px; background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 20px; border: 1px solid var(--primary); margin-bottom: 30px; }
        .hero-icon { font-size: 50px; color: #22d3ee; margin-bottom: 10px; }
        
        .box { background: var(--card); border-radius: 15px; padding: 25px; margin-bottom: 25px; border: 1px solid #334155; }
        h2 { color: var(--accent); border-left: 5px solid var(--primary); padding-left: 15px; }

        /* Syntax Display */
        .syntax-box { background: #000; padding: 20px; border-radius: 10px; border-left: 4px solid #a855f7; font-family: monospace; color: #e2e8f0; line-height: 1.5; }
        .keyword { color: #f472b6; font-weight: bold; }
        .variable { color: #60a5fa; }

        /* Table Simulation */
        .table-sim { width: 100%; border-collapse: collapse; margin: 15px 0; background: #0f172a; }
        .table-sim th { background: var(--primary); color: white; padding: 10px; text-align: left; }
        .table-sim td { border: 1px solid #334155; padding: 10px; }

        /* Quiz UI */
        textarea { width: 100%; height: 80px; background: #0f172a; color: var(--accent); border: 1px solid var(--primary); border-radius: 8px; padding: 15px; font-family: monospace; font-size: 16px; margin: 10px 0; }
        .btn { cursor: pointer; padding: 12px 25px; border-radius: 8px; border: none; font-weight: 600; transition: 0.3s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-check { background: var(--accent); color: #0f172a; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="container">
    <div class="hero-section">
        <div class="hero-icon"><i class="fas fa-microchip"></i></div>
        <h1 style="margin:0; color:#22d3ee;">COMPUTER CASE HERO</h1>
        <p>SQL VIEW Learning & Challenge</p>
    </div>

    <div id="lesson" class="box">
        <h2>1. รูปแบบคำสั่ง (Syntax) พื้นฐาน</h2>
        <p>VIEW คือตารางเสมือนที่สร้างจากคำสั่ง SELECT เพื่อช่วยให้การจัดการข้อมูลง่ายขึ้น</p>
        
        <div class="syntax-box">
            <span class="keyword">CREATE VIEW</span> <span class="variable">view_name</span> <span class="keyword">AS</span><br>
            <span class="keyword">SELECT</span> column1, column2, ...<br>
            <span class="keyword">FROM</span> table_name<br>
            <span class="keyword">WHERE</span> condition;
        </div>

        <div style="margin-top:20px;">
            <p><strong>ตัวอย่างการใช้งาน:</strong> สร้าง View เพื่อดูเฉพาะพนักงานแผนก IT</p>
            <div class="syntax-box" style="border-left-color: var(--accent);">
                CREATE VIEW it_staff AS SELECT name, salary FROM employees WHERE dept = 'IT';
            </div>
            <p><strong>ผลลัพธ์ที่ได้:</strong></p>
            <table class="table-sim">
                <tr><th>name</th><th>salary</th></tr>
                <tr><td>Somsak</td><td>45,000</td></tr>
                <tr><td>Wichai</td><td>38,000</td></tr>
            </table>
        </div>
        <button class="btn btn-primary" onclick="startQuiz()">เริ่มทำแบบทดสอบ (5 ข้อ)</button>
    </div>

    <div id="quiz-area" class="hidden">
        <div id="score-board" class="box" style="text-align:center; border-color: var(--gold);">
            <h3>คะแนนปัจจุบัน: <span id="current-score">0</span> / 100</h3>
        </div>

        <div class="box quiz-box">
            <h3>โจทย์ข้อที่ 1: การสร้าง VIEW</h3>
            <p>จงสร้าง VIEW ชื่อ <code>top_sales</code> จากตาราง <code>orders</code> โดยเลือกทุกคอลัมน์ที่มี <code>amount > 5000</code></p>
            <textarea id="q1" placeholder="พิมพ์คำสั่ง SQL ที่นี่..."></textarea>
            <button class="btn btn-check" onclick="checkAnswer(1, 'create view', 'top_sales', 20)">ตรวจสอบ</button>
            <div id="fb1" style="margin-top:10px;"></div>
        </div>

        <div class="box quiz-box">
            <h3>โจทย์ข้อที่ 2: การเรียกใช้ VIEW</h3>
            <p>จงเขียนคำสั่งแสดงข้อมูลทั้งหมดจาก VIEW ที่มีชื่อว่า <code>top_sales</code></p>
            <textarea id="q2"></textarea>
            <button class="btn btn-check" onclick="checkAnswer(2, 'select', 'top_sales', 20)">ตรวจสอบ</button>
            <div id="fb2" style="margin-top:10px;"></div>
        </div>

        <div class="box quiz-box">
            <h3>โจทย์ข้อที่ 3: การแก้ไขข้อมูลผ่าน VIEW</h3>
            <p>จงอัปเดต <code>amount</code> ใน VIEW <code>top_sales</code> ให้เป็น 6000 สำหรับรายการที่มี <code>id = 101</code></p>
            <textarea id="q3"></textarea>
            <button class="btn btn-check" onclick="checkAnswer(3, 'update', '6000', 20)">ตรวจสอบ</button>
            <div id="fb3" style="margin-top:10px;"></div>
        </div>

        <div class="box quiz-box">
            <h3>โจทย์ข้อที่ 4: การลบข้อมูลผ่าน VIEW</h3>
            <p>จงลบแถวข้อมูลออกจาก VIEW <code>top_sales</code> สำหรับรายการที่มี <code>id = 99</code></p>
            <textarea id="q4"></textarea>
            <button class="btn btn-check" onclick="checkAnswer(4, 'delete', '99', 20)">ตรวจสอบ</button>
            <div id="fb4" style="margin-top:10px;"></div>
        </div>

        <div class="box quiz-box">
            <h3>โจทย์ข้อที่ 5: การลบทิ้ง (DROP VIEW)</h3>
            <p>หากไม่ต้องการใช้งาน VIEW <code>top_sales</code> แล้ว ต้องใช้คำสั่งใดเพื่อลบ VIEW นี้ออกจากระบบ</p>
            <textarea id="q5"></textarea>
            <button class="btn btn-check" onclick="checkAnswer(5, 'drop view', 'top_sales', 20)">ตรวจสอบ</button>
            <div id="fb5" style="margin-top:10px;"></div>
        </div>

        <button class="btn btn-primary" style="width:100%;" onclick="finishQuiz()">ส่งข้อสอบทั้งหมด</button>
    </div>

    <div id="result-screen" class="hidden box" style="text-align:center;">
        <h1 style="color:var(--gold);">ยินดีด้วย! เหล่า Hero</h1>
        <p>คุณทำคะแนนได้</p>
        <h2 id="final-score" style="font-size: 50px;">0</h2>
        <p>คะแนนของคุณถูกบันทึกเข้าระบบ Leaderboard แล้ว</p>
        <button class="btn btn-primary" onclick="location.reload()">ทำใหม่อีกครั้ง</button>
    </div>
</div>

<script>
    let score = 0;
    let answered = new Set();

    function startQuiz() {
        document.getElementById('lesson').classList.add('hidden');
        document.getElementById('quiz-area').classList.remove('hidden');
    }

    function checkAnswer(id, k1, k2, pts) {
        if(answered.has(id)) return;
        const input = document.getElementById('q'+id).value.toLowerCase();
        const fb = document.getElementById('fb'+id);
        
        if(input.includes(k1) && input.includes(k2)) {
            score += pts;
            fb.innerHTML = "<span style='color:var(--accent)'><i class='fas fa-check-circle'></i> ถูกต้อง! +"+pts+" คะแนน</span>";
            document.getElementById('current-score').innerText = score;
            answered.add(id);
        } else {
            fb.innerHTML = "<span style='color:#ef4444'><i class='fas fa-times-circle'></i> ยังไม่ถูกต้อง ลองใหม่อีกครั้ง</span>";
        }
    }

    function finishQuiz() {
        if(answered.size < 5) {
            if(!confirm("คุณยังทำไม่ครบทุกข้อ ยืนยันจะส่งหรือไม่?")) return;
        }
        document.getElementById('quiz-area').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('final-score').innerText = score;
        if(score >= 80) {
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        }
    }
</script>
</body>
</html>
